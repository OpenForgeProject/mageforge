<?xml version="1.0"?>
<config
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd"
>
      <!-- Register CLI Commands -->
      <type name="Magento\Framework\Console\CommandList">
            <arguments>
                  <argument name="commands" xsi:type="array">
                        <item name="mageforge_system_version" xsi:type="object">
                              OpenForgeProject\MageForge\Console\Command\System\VersionCommand</item>
                        <item name="mageforge_system_check" xsi:type="object">
                              OpenForgeProject\MageForge\Console\Command\System\CheckCommand</item>
                        <item name="mageforge_theme_list" xsi:type="object">
                              OpenForgeProject\MageForge\Console\Command\Theme\ListCommand</item>
                        <item name="mageforge_theme_build" xsi:type="object">
                              OpenForgeProject\MageForge\Console\Command\Theme\BuildCommand</item>
                        <item name="mageforge_theme_watch" xsi:type="object">
                              OpenForgeProject\MageForge\Console\Command\Theme\WatchCommand</item>
                        <item name="mageforge_theme_clean" xsi:type="object">
                              OpenForgeProject\MageForge\Console\Command\Theme\CleanCommand</item>
                        <item name="mageforge_hyva_compatibility_check" xsi:type="object">
                              OpenForgeProject\MageForge\Console\Command\Hyva\CompatibilityCheckCommand</item>
                        <item name="mageforge_theme_tokens" xsi:type="object">
                              OpenForgeProject\MageForge\Console\Command\Theme\TokensCommand</item>
                        <item name="mageforge_dev_inspector" xsi:type="object">
                              OpenForgeProject\MageForge\Console\Command\Dev\InspectorCommand</item>
                        <item name="mageforge_theme_copy_from_vendor" xsi:type="object">
                              OpenForgeProject\MageForge\Console\Command\Theme\CopyFromVendorCommand</item>
                  </argument>
            </arguments>
      </type>

      <!-- Configure Theme Builder Pool -->
      <type name="OpenForgeProject\MageForge\Service\ThemeBuilder\BuilderPool">
            <arguments>
                  <argument name="builders" xsi:type="array">
                        <item name="hyva" xsi:type="object">
                              OpenForgeProject\MageForge\Service\ThemeBuilder\HyvaThemes\Builder</item>
                        <item name="standard" xsi:type="object">
                              OpenForgeProject\MageForge\Service\ThemeBuilder\MagentoStandard\Builder</item>
                        <item name="tailwindcss" xsi:type="object">
                              OpenForgeProject\MageForge\Service\ThemeBuilder\TailwindCSS\Builder</item>
                  </argument>
            </arguments>
      </type>

      <!-- Register ThemeSuggester Service -->
      <type name="OpenForgeProject\MageForge\Service\ThemeSuggester">
            <arguments>
                  <argument name="themeList" xsi:type="object">OpenForgeProject\MageForge\Model\ThemeList</argument>
            </arguments>
      </type>

      <!-- Configure CleanCommand with ThemeCleaner -->
      <type name="OpenForgeProject\MageForge\Console\Command\Theme\CleanCommand">
            <arguments>
                  <argument name="themeCleaner" xsi:type="object">OpenForgeProject\MageForge\Service\ThemeCleaner</argument>
            </arguments>
      </type>

      <!-- Configure SymlinkCleaner Service -->
      <type name="OpenForgeProject\MageForge\Service\SymlinkCleaner">
            <arguments>
                  <argument name="fileDriver" xsi:type="object">Magento\Framework\Filesystem\Driver\File</argument>
                  <argument name="state" xsi:type="object">Magento\Framework\App\State</argument>
            </arguments>
      </type>

      <!-- Configure NodePackageManager Service -->
      <type name="OpenForgeProject\MageForge\Service\NodePackageManager">
            <arguments>
                  <argument name="shell" xsi:type="object">Magento\Framework\Shell</argument>
                  <argument name="fileDriver" xsi:type="object">Magento\Framework\Filesystem\Driver\File</argument>
            </arguments>
      </type>

      <!-- Configure NodeSetupValidator Service -->
      <type name="OpenForgeProject\MageForge\Service\NodeSetupValidator">
            <arguments>
                  <argument name="fileDriver" xsi:type="object">Magento\Framework\Filesystem\Driver\File</argument>
                  <argument name="nodePackageManager" xsi:type="object">OpenForgeProject\MageForge\Service\NodePackageManager</argument>
            </arguments>
      </type>
</config>
